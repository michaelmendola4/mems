(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{1504:function(e,t,r){Promise.resolve().then(r.bind(r,3492))},3492:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(7437),a=r(2265),l=r(8196);function i(){let[e,t]=(0,a.useState)({title:"",description:"",date:"",location:"",people:"",emotions:""}),[r,i]=(0,a.useState)("input"),[o,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),g=e=>{let{id:r,value:s}=e.target;t(e=>({...e,[r]:s}))},u=async t=>{if(t.preventDefault(),!e.title||!e.description){alert("Please provide at least a title and description for your memory.");return}d(!0),p("");try{let t=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate image")}let r=await t.json();x(r.prompt),n(r.imageUrl),i("preview")}catch(e){console.error("Error generating image:",e),p(e.message||"Failed to generate image. Please try again.")}finally{d(!1)}},y=async()=>{d(!0),p("");try{let t=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate image")}let r=await t.json();x(r.prompt),n(r.imageUrl)}catch(e){console.error("Error regenerating image:",e),p(e.message||"Failed to regenerate image. Please try again.")}finally{d(!1)}};return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 text-primary-700",children:"input"===r?"Create New Memory":"Preview Memory"}),"input"===r?(0,s.jsx)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-6",children:(0,s.jsxs)("form",{className:"space-y-6",onSubmit:u,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Memory Title"}),(0,s.jsx)("input",{type:"text",id:"title",value:e.title,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a title for your memory"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Memory Description"}),(0,s.jsx)("textarea",{id:"description",rows:6,value:e.description,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe your memory in detail..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",id:"date",value:e.date,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)("input",{type:"text",id:"location",value:e.location,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Where did this memory take place?"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"people",className:"block text-sm font-medium text-gray-700 mb-1",children:"People"}),(0,s.jsx)("input",{type:"text",id:"people",value:e.people,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Who was involved? (comma separated)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"emotions",className:"block text-sm font-medium text-gray-700 mb-1",children:"Emotions"}),(0,s.jsx)("input",{type:"text",id:"emotions",value:e.emotions,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"How did you feel? (comma separated)"})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)("button",{type:"submit",className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center",disabled:c,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating Image..."]}):"Generate Image from Memory"})})]})}):(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:e.title}),(0,s.jsx)("div",{className:"mb-6",children:c?(0,s.jsx)("div",{className:"h-64 bg-gray-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-10 w-10 text-primary-600 mx-auto mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Generating new image..."})]})}):h?(0,s.jsx)("div",{className:"h-64 bg-red-50 flex items-center justify-center p-4 rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Error Generating Image"}),(0,s.jsx)("p",{className:"text-red-500 text-sm",children:h}),(0,s.jsx)("button",{onClick:y,className:"mt-4 bg-red-100 hover:bg-red-200 text-red-700 font-bold py-2 px-4 rounded-lg text-sm",children:"Try Again"})]})}):(0,s.jsx)("img",{src:o,alt:e.title,className:"w-full h-64 object-cover rounded-lg",onError:e=>{e.target.onerror=null,e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5Y2EzYWYiPk1lbW9yeSBJbWFnZTwvdGV4dD48L3N2Zz4="}})}),m&&(0,s.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"AI Prompt Used"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:m})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:e.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.date&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500",children:"Date"}),(0,s.jsx)("p",{children:new Date(e.date).toLocaleDateString()})]}),e.location&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500",children:"Location"}),(0,s.jsx)("p",{children:e.location})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.people&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500",children:"People"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.people.split(",").map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.trim()},t))})]}),e.emotions&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500",children:"Emotions"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.emotions.split(",").map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:e.trim()},t))})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsx)("button",{onClick:y,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center justify-center",disabled:c,children:"Regenerate Image"}),(0,s.jsx)("button",{onClick:()=>{alert("Memory saved successfully!"),t({title:"",description:"",date:"",location:"",people:"",emotions:""}),n(""),x(""),p(""),i("input")},className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Memory"}),(0,s.jsx)("button",{onClick:()=>i("input"),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg",children:"Edit Details"})]})]})})})]})})}r(7648)},8196:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(7437),a=r(7648),l=r(9376);function i(e){let{children:t}=e,r=(0,l.usePathname)();return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)("header",{className:"bg-white shadow-md",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,s.jsx)(a.default,{href:"/",className:"text-2xl font-bold text-primary-600",children:"Mems"}),(0,s.jsx)("nav",{className:"hidden md:block",children:(0,s.jsxs)("ul",{className:"flex space-x-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(a.default,{href:"/create",className:"py-2 px-3 ".concat("/create"===r?"text-primary-600 font-medium":"text-gray-700 hover:text-primary-600"),children:"Create Memory"})}),(0,s.jsx)("li",{children:(0,s.jsx)(a.default,{href:"/storybook",className:"py-2 px-3 ".concat("/storybook"===r?"text-primary-600 font-medium":"text-gray-700 hover:text-primary-600"),children:"My Storybook"})}),(0,s.jsx)("li",{children:(0,s.jsx)(a.default,{href:"/timeline",className:"py-2 px-3 ".concat("/timeline"===r?"text-primary-600 font-medium":"text-gray-700 hover:text-primary-600"),children:"Timeline"})}),(0,s.jsx)("li",{children:(0,s.jsx)(a.default,{href:"/collections",className:"py-2 px-3 ".concat("/collections"===r?"text-primary-600 font-medium":"text-gray-700 hover:text-primary-600"),children:"Collections"})})]})}),(0,s.jsx)(a.default,{href:"/profile",className:"flex items-center text-gray-700 hover:text-primary-600",children:(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})})]})}),(0,s.jsx)("main",{className:"flex-grow pb-20",children:t}),(0,s.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200",children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(a.default,{href:"/",className:"flex flex-col items-center py-2 px-4 ".concat("/"===r?"text-primary-600":"text-gray-500 hover:text-primary-600"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Home"})]}),(0,s.jsxs)(a.default,{href:"/search",className:"flex flex-col items-center py-2 px-4 ".concat("/search"===r?"text-primary-600":"text-gray-500 hover:text-primary-600"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Search"})]}),(0,s.jsxs)(a.default,{href:"/create",className:"flex flex-col items-center py-2 px-4 ".concat("/create"===r?"text-primary-600":"text-gray-500 hover:text-primary-600"),children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary-600 flex items-center justify-center -mt-5",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"New"})]}),(0,s.jsxs)(a.default,{href:"/storybook",className:"flex flex-col items-center py-2 px-4 ".concat("/storybook"===r?"text-primary-600":"text-gray-500 hover:text-primary-600"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Storybook"})]}),(0,s.jsxs)(a.default,{href:"/settings",className:"flex flex-col items-center py-2 px-4 ".concat("/settings"===r?"text-primary-600":"text-gray-500 hover:text-primary-600"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Settings"})]})]})})})]})}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=1504)}),_N_E=e.O()}]);